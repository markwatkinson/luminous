<COMMENT>-- SQL to create the initial tables for the MediaWiki database.</COMMENT>
<COMMENT>-- This is read and executed by the install script; you should</COMMENT>
<COMMENT>-- not have to run it by itself unless doing a manual install.</COMMENT>
<COMMENT>-- This is the Oracle version (based on PostgreSQL schema).</COMMENT>
<COMMENT>-- For information about each table, please see the notes in maintenance/tables.sql</COMMENT>

<KEYWORD>CREATE</KEYWORD> SEQUENCE user_user_id_seq <KEYWORD>MINVALUE</KEYWORD> <NUMERIC>0</NUMERIC> <KEYWORD>START</KEYWORD> <KEYWORD>WITH</KEYWORD> <NUMERIC>0</NUMERIC>;

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> mwuser ( <COMMENT>-- replace reserved word 'user'</COMMENT>
  user_id                   <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  user_name                 <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>UNIQUE</KEYWORD>,
  user_real_name            <TYPE>CLOB</TYPE>,
  user_password             <TYPE>CLOB</TYPE>,
  user_newpassword          <TYPE>CLOB</TYPE>,
  user_newpass_time         <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>,
  user_token                <TYPE>CHAR</TYPE>(<NUMERIC>32</NUMERIC>),
  user_email                <TYPE>CLOB</TYPE>,
  user_email_token          <TYPE>CHAR</TYPE>(<NUMERIC>32</NUMERIC>),
  user_email_token_expires  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>,
  user_email_authenticated  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>,
  user_options              <TYPE>CLOB</TYPE>,
  user_touched              <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>,
  user_registration         <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>,
  user_editcount            <TYPE>INTEGER</TYPE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> user_email_token_idx <KEYWORD>ON</KEYWORD> mwuser (user_email_token);

<COMMENT>-- Create a dummy user to satisfy fk contraints especially with revisions</COMMENT>
<KEYWORD>INSERT</KEYWORD> <KEYWORD>INTO</KEYWORD> mwuser
  <KEYWORD>VALUES</KEYWORD> (<OBJ>user_user_id_seq</OBJ>.<OO>nextval</OO>,<STRING>'Anonymous'</STRING>,<STRING>''</STRING>,<VALUE>NULL</VALUE>,<VALUE>NULL</VALUE>,<VALUE>NULL</VALUE>,<VALUE>NULL</VALUE>,<VALUE>NULL</VALUE>,<VALUE>NULL</VALUE>,<VALUE>NULL</VALUE>,<VALUE>NULL</VALUE>, <STRING>''</STRING>, <KEYWORD>current_timestamp</KEYWORD>, <KEYWORD>current_timestamp</KEYWORD>, <NUMERIC>0</NUMERIC>);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> user_groups (
  ug_user   <TYPE>INTEGER</TYPE>      <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  ug_group  <TYPE>CHAR</TYPE>(<NUMERIC>16</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> user_groups_unique <KEYWORD>ON</KEYWORD> user_groups (ug_user, ug_group);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> user_newtalk (
  user_id  <TYPE>INTEGER</TYPE> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  user_ip  <TYPE>VARCHAR</TYPE>(<NUMERIC>40</NUMERIC>)        <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> user_newtalk_id_idx <KEYWORD>ON</KEYWORD> user_newtalk (user_id);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> user_newtalk_ip_idx <KEYWORD>ON</KEYWORD> user_newtalk (user_ip);

<KEYWORD>CREATE</KEYWORD> SEQUENCE page_page_id_seq;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> page (
  page_id            <TYPE>INTEGER</TYPE>        <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  page_namespace     <TYPE>SMALLINT</TYPE>       <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  page_title         <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)           <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  page_restrictions  <TYPE>CLOB</TYPE>,
  page_counter       <TYPE>INTEGER</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  page_is_redirect   <TYPE>CHAR</TYPE>           <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  page_is_new        <TYPE>CHAR</TYPE>           <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  page_random        <TYPE>NUMERIC</TYPE>(<NUMERIC>15</NUMERIC>,<NUMERIC>14</NUMERIC>) <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  page_touched       <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>,
  page_latest        <TYPE>INTEGER</TYPE>        <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>, <COMMENT>-- FK?</COMMENT>
  page_len           <TYPE>INTEGER</TYPE>        <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> page_unique_name <KEYWORD>ON</KEYWORD> page (page_namespace, page_title);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> page_random_idx         <KEYWORD>ON</KEYWORD> page (page_random);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> page_len_idx            <KEYWORD>ON</KEYWORD> page (page_len);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TRIGGER</KEYWORD> page_set_random <KEYWORD>BEFORE</KEYWORD> <KEYWORD>INSERT</KEYWORD> <KEYWORD>ON</KEYWORD> page
        <KEYWORD>FOR</KEYWORD> <KEYWORD>EACH</KEYWORD> <KEYWORD>ROW</KEYWORD> <KEYWORD>WHEN</KEYWORD> (<OBJ>new</OBJ>.<OO>page_random</OO> <OPERATOR>IS</OPERATOR> <VALUE>NULL</VALUE>)
        <KEYWORD>BEGIN</KEYWORD>
                <KEYWORD>SELECT</KEYWORD> <OBJ>dbms_random</OBJ>.<OO>value</OO> <KEYWORD>INTO</KEYWORD> <OPERATOR>:</OPERATOR><OBJ>new</OBJ>.<OO>page_random</OO> <KEYWORD>FROM</KEYWORD> dual;
        <KEYWORD>END</KEYWORD>;
<OPERATOR>/</OPERATOR>

<KEYWORD>CREATE</KEYWORD> SEQUENCE rev_rev_id_val;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> revision (
  rev_id          <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  rev_page        <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page (page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  rev_text_id     <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>, <COMMENT>-- FK</COMMENT>
  rev_comment     <TYPE>CLOB</TYPE>,
  rev_user        <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id),
  rev_user_text   <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rev_timestamp   <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rev_minor_edit  <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rev_deleted     <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rev_len         <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>,
  rev_parent_id   <TYPE>INTEGER</TYPE>          <KEYWORD>DEFAULT</KEYWORD> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> revision_unique <KEYWORD>ON</KEYWORD> revision (rev_page, rev_id);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rev_text_id_idx        <KEYWORD>ON</KEYWORD> revision (rev_text_id);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rev_timestamp_idx      <KEYWORD>ON</KEYWORD> revision (rev_timestamp);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rev_user_idx           <KEYWORD>ON</KEYWORD> revision (rev_user);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rev_user_text_idx      <KEYWORD>ON</KEYWORD> revision (rev_user_text);


<KEYWORD>CREATE</KEYWORD> SEQUENCE text_old_id_val;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> pagecontent ( <COMMENT>-- replaces reserved word 'text'</COMMENT>
  old_id     <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  old_text   <TYPE>CLOB</TYPE>,
  old_flags  <TYPE>CLOB</TYPE>
);


<KEYWORD>CREATE</KEYWORD> SEQUENCE pr_id_val;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> page_restrictions (
  pr_id      <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>UNIQUE</KEYWORD>,
  pr_page    <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page (page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  pr_type    <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  pr_level   <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  pr_cascade <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  pr_user    <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>,
  pr_expiry  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>      <VALUE>NULL</VALUE>
);
<KEYWORD>ALTER</KEYWORD> <KEYWORD>TABLE</KEYWORD> page_restrictions <KEYWORD>ADD</KEYWORD> <KEYWORD>CONSTRAINT</KEYWORD> page_restrictions_pk <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD> (pr_page,pr_type);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> archive (
  ar_namespace   <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ar_title       <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ar_text        <TYPE>CLOB</TYPE>,
  ar_comment     <TYPE>CLOB</TYPE>,
  ar_user        <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  ar_user_text   <TYPE>CLOB</TYPE>         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ar_timestamp   <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ar_minor_edit  <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ar_flags       <TYPE>CLOB</TYPE>,
  ar_rev_id      <TYPE>INTEGER</TYPE>,
  ar_text_id     <TYPE>INTEGER</TYPE>,
  ar_deleted     <TYPE>INTEGER</TYPE>      <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> archive_name_title_timestamp <KEYWORD>ON</KEYWORD> archive (ar_namespace,ar_title,ar_timestamp);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> redirect (
  rd_from       <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  rd_namespace  <TYPE>SMALLINT</TYPE> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rd_title      <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> redirect_ns_title <KEYWORD>ON</KEYWORD> redirect (rd_namespace,rd_title,rd_from);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> pagelinks (
  pl_from       <TYPE>INTEGER</TYPE>   <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  pl_namespace  <TYPE>SMALLINT</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  pl_title      <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> pagelink_unique <KEYWORD>ON</KEYWORD> pagelinks (pl_from,pl_namespace,pl_title);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> templatelinks (
  tl_from       <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  tl_namespace  <TYPE>INTEGER</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  tl_title      <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> templatelinks_unique <KEYWORD>ON</KEYWORD> templatelinks (tl_namespace,tl_title,tl_from);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> imagelinks (
  il_from  <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  il_to    <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> il_from <KEYWORD>ON</KEYWORD> imagelinks (il_to,il_from);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> categorylinks (
  cl_from       <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  cl_to         <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  cl_sortkey    <TYPE>VARCHAR</TYPE>(<NUMERIC>86</NUMERIC>),
  cl_timestamp  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> cl_from <KEYWORD>ON</KEYWORD> categorylinks (cl_from, cl_to);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> cl_sortkey     <KEYWORD>ON</KEYWORD> categorylinks (cl_to, cl_sortkey);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> externallinks (
  el_from   <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  el_to     <TYPE>VARCHAR</TYPE>(<NUMERIC>2048</NUMERIC>) <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  el_index  <TYPE>CLOB</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<COMMENT>-- <COMMENT_NOTE>XXX</COMMENT_NOTE> CREATE INDEX externallinks_from_to ON externallinks (el_from,el_to);</COMMENT>
<COMMENT>-- <COMMENT_NOTE>XXX</COMMENT_NOTE> CREATE INDEX externallinks_index   ON externallinks (el_index);</COMMENT>

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> langlinks (
  ll_from    <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page (page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  ll_lang    <TYPE>VARCHAR</TYPE>(<NUMERIC>10</NUMERIC>),
  ll_title   <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> langlinks_unique <KEYWORD>ON</KEYWORD> langlinks (ll_from,ll_lang);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> langlinks_lang_title    <KEYWORD>ON</KEYWORD> langlinks (ll_lang,ll_title);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> site_stats (
  ss_row_id         <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>UNIQUE</KEYWORD>,
  ss_total_views    <TYPE>INTEGER</TYPE>            <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC>,
  ss_total_edits    <TYPE>INTEGER</TYPE>            <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC>,
  ss_good_articles  <TYPE>INTEGER</TYPE>            <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC>,
  ss_total_pages    <TYPE>INTEGER</TYPE>            <KEYWORD>DEFAULT</KEYWORD> <OPERATOR>-</OPERATOR><NUMERIC>1</NUMERIC>,
  ss_users          <TYPE>INTEGER</TYPE>            <KEYWORD>DEFAULT</KEYWORD> <OPERATOR>-</OPERATOR><NUMERIC>1</NUMERIC>,
  ss_admins         <TYPE>INTEGER</TYPE>            <KEYWORD>DEFAULT</KEYWORD> <OPERATOR>-</OPERATOR><NUMERIC>1</NUMERIC>,
  ss_images         <TYPE>INTEGER</TYPE>            <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC>
);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> hitcounter (
  hc_id  <TYPE>INTEGER</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);


<KEYWORD>CREATE</KEYWORD> SEQUENCE ipblocks_ipb_id_val;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> ipblocks (
  ipb_id                <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  ipb_address           <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <VALUE>NULL</VALUE>,
  ipb_user              <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  ipb_by                <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  ipb_reason            <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ipb_timestamp         <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ipb_auto              <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ipb_anon_only         <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ipb_create_account    <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'1'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ipb_enable_autoblock  <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'1'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ipb_expiry            <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  ipb_range_start       <TYPE>CHAR</TYPE>(<NUMERIC>8</NUMERIC>),
  ipb_range_end         <TYPE>CHAR</TYPE>(<NUMERIC>8</NUMERIC>),
  ipb_deleted           <TYPE>INTEGER</TYPE>      <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> ipb_address <KEYWORD>ON</KEYWORD> ipblocks (ipb_address);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> ipb_user    <KEYWORD>ON</KEYWORD> ipblocks (ipb_user);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> ipb_range   <KEYWORD>ON</KEYWORD> ipblocks (ipb_range_start,ipb_range_end);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> image (
  img_name         <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  img_size         <TYPE>INTEGER</TYPE>   <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  img_width        <TYPE>INTEGER</TYPE>   <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  img_height       <TYPE>INTEGER</TYPE>   <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  img_metadata     <TYPE>CLOB</TYPE>,
  img_bits         <TYPE>SMALLINT</TYPE>,
  img_media_type   <TYPE>CLOB</TYPE>,
  img_major_mime   <TYPE>CLOB</TYPE>                <KEYWORD>DEFAULT</KEYWORD> <STRING>'unknown'</STRING>,
  img_minor_mime   <TYPE>CLOB</TYPE>                <KEYWORD>DEFAULT</KEYWORD> <STRING>'unknown'</STRING>,
  img_description  <TYPE>CLOB</TYPE>,
  img_user         <TYPE>INTEGER</TYPE>       <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  img_user_text    <TYPE>CLOB</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  img_timestamp    <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> img_size_idx      <KEYWORD>ON</KEYWORD> image (img_size);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> img_timestamp_idx <KEYWORD>ON</KEYWORD> image (img_timestamp);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> oldimage (
  oi_name          <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> image(img_name),
  oi_archive_name  <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>),
  oi_size          <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  oi_width         <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  oi_height        <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  oi_bits          <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  oi_description   <TYPE>CLOB</TYPE>,
  oi_user          <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  oi_user_text     <TYPE>CLOB</TYPE>         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  oi_timestamp     <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  oi_metadata      <TYPE>CLOB</TYPE>,
  oi_media_type    <TYPE>VARCHAR</TYPE>(<NUMERIC>10</NUMERIC>) <KEYWORD>DEFAULT</KEYWORD> <VALUE>NULL</VALUE>,
  oi_major_mime    <TYPE>VARCHAR</TYPE>(<NUMERIC>11</NUMERIC>) <KEYWORD>DEFAULT</KEYWORD> <STRING>'unknown'</STRING>,
  oi_minor_mime    <TYPE>VARCHAR</TYPE>(<NUMERIC>32</NUMERIC>) <KEYWORD>DEFAULT</KEYWORD> <STRING>'unknown'</STRING>,
  oi_deleted       <TYPE>INTEGER</TYPE> <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> oi_name_timestamp <KEYWORD>ON</KEYWORD> oldimage (oi_name,oi_timestamp);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> oi_name_archive_name <KEYWORD>ON</KEYWORD> oldimage (oi_name,oi_archive_name);

<KEYWORD>CREATE</KEYWORD> SEQUENCE filearchive_fa_id_seq;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> filearchive (
  fa_id                 <TYPE>INTEGER</TYPE>       <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  fa_name               <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  fa_archive_name       <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>),
  fa_storage_group      <TYPE>VARCHAR</TYPE>(<NUMERIC>16</NUMERIC>),
  fa_storage_key        <TYPE>CHAR</TYPE>(<NUMERIC>64</NUMERIC>),
  fa_deleted_user       <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  fa_deleted_timestamp  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  fa_deleted_reason     <TYPE>CLOB</TYPE>,
  fa_size               <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  fa_width              <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  fa_height             <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  fa_metadata           <TYPE>CLOB</TYPE>,
  fa_bits               <TYPE>SMALLINT</TYPE>,
  fa_media_type         <TYPE>CLOB</TYPE>,
  fa_major_mime         <TYPE>CLOB</TYPE>                   <KEYWORD>DEFAULT</KEYWORD> <STRING>'unknown'</STRING>,
  fa_minor_mime         <TYPE>CLOB</TYPE>                   <KEYWORD>DEFAULT</KEYWORD> <STRING>'unknown'</STRING>,
  fa_description        <TYPE>CLOB</TYPE>         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  fa_user               <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  fa_user_text          <TYPE>CLOB</TYPE>         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  fa_timestamp          <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>,
  fa_deleted            <TYPE>INTEGER</TYPE>      <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> fa_name_time <KEYWORD>ON</KEYWORD> filearchive (fa_name, fa_timestamp);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> fa_dupe      <KEYWORD>ON</KEYWORD> filearchive (fa_storage_group, fa_storage_key);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> fa_notime    <KEYWORD>ON</KEYWORD> filearchive (fa_deleted_timestamp);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> fa_nouser    <KEYWORD>ON</KEYWORD> filearchive (fa_deleted_user);


<KEYWORD>CREATE</KEYWORD> SEQUENCE rc_rc_id_seq;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> recentchanges (
  rc_id              <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  rc_timestamp       <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_cur_time        <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_user            <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  rc_user_text       <TYPE>CLOB</TYPE>         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_namespace       <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_title           <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_comment         <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>),
  rc_minor           <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_bot             <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_new             <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_cur_id          <TYPE>INTEGER</TYPE>          <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  rc_this_oldid      <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_last_oldid      <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_type            <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_moved_to_ns     <TYPE>SMALLINT</TYPE>,
  rc_moved_to_title  <TYPE>CLOB</TYPE>,
  rc_patrolled       <TYPE>CHAR</TYPE>         <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_ip              <TYPE>VARCHAR</TYPE>(<NUMERIC>15</NUMERIC>),
  rc_old_len         <TYPE>INTEGER</TYPE>,
  rc_new_len         <TYPE>INTEGER</TYPE>,
  rc_deleted         <TYPE>INTEGER</TYPE>      <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_logid           <TYPE>INTEGER</TYPE>      <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  rc_log_type            <TYPE>CLOB</TYPE>,
  rc_log_action      <TYPE>CLOB</TYPE>,
  rc_params              <TYPE>CLOB</TYPE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rc_timestamp       <KEYWORD>ON</KEYWORD> recentchanges (rc_timestamp);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rc_namespace_title <KEYWORD>ON</KEYWORD> recentchanges (rc_namespace, rc_title);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rc_cur_id          <KEYWORD>ON</KEYWORD> recentchanges (rc_cur_id);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> new_name_timestamp <KEYWORD>ON</KEYWORD> recentchanges (rc_new, rc_namespace, rc_timestamp);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> rc_ip              <KEYWORD>ON</KEYWORD> recentchanges (rc_ip);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> watchlist (
  wl_user                   <TYPE>INTEGER</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  wl_namespace              <TYPE>SMALLINT</TYPE>    <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  wl_title                  <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)        <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  wl_notificationtimestamp  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>UNIQUE</KEYWORD> <KEYWORD>INDEX</KEYWORD> wl_user_namespace_title <KEYWORD>ON</KEYWORD> watchlist (wl_namespace, wl_title, wl_user);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> math (
  math_inputhash              <TYPE>VARCHAR</TYPE>(<NUMERIC>16</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>UNIQUE</KEYWORD>,
  math_outputhash             <TYPE>VARCHAR</TYPE>(<NUMERIC>16</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  math_html_conservativeness  <TYPE>SMALLINT</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  math_html                   <TYPE>CLOB</TYPE>,
  math_mathml                 <TYPE>CLOB</TYPE>
);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> interwiki (
  iw_prefix  <TYPE>VARCHAR</TYPE>(<NUMERIC>32</NUMERIC>)   <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>UNIQUE</KEYWORD>,
  iw_url     <TYPE>VARCHAR</TYPE>(<NUMERIC>127</NUMERIC>)  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  iw_local   <TYPE>CHAR</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  iw_trans   <TYPE>CHAR</TYPE>  <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> querycache (
  qc_type       <TYPE>CHAR</TYPE>(<NUMERIC>32</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qc_value      <TYPE>SMALLINT</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qc_namespace  <TYPE>SMALLINT</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qc_title      <TYPE>CHAR</TYPE>(<NUMERIC>255</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> querycache_type_value <KEYWORD>ON</KEYWORD> querycache (qc_type, qc_value);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> querycache_info (
  qci_type       <TYPE>VARCHAR</TYPE>(<NUMERIC>32</NUMERIC>)              <KEYWORD>UNIQUE</KEYWORD>,
  qci_timestamp  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE> <VALUE>NULL</VALUE>
);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> querycachetwo (
  qcc_type          <TYPE>CHAR</TYPE>(<NUMERIC>32</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qcc_value         <TYPE>SMALLINT</TYPE> <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qcc_namespace     <TYPE>INTEGER</TYPE>  <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qcc_title         <TYPE>CHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <KEYWORD>DEFAULT</KEYWORD> <STRING>''</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qcc_namespacetwo  <TYPE>INTEGER</TYPE>  <KEYWORD>DEFAULT</KEYWORD> <NUMERIC>0</NUMERIC> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  qcc_titletwo      <TYPE>CHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <KEYWORD>DEFAULT</KEYWORD> <STRING>''</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> querycachetwo_type_value <KEYWORD>ON</KEYWORD> querycachetwo (qcc_type, qcc_value);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> querycachetwo_title      <KEYWORD>ON</KEYWORD> querycachetwo (qcc_type,qcc_namespace,qcc_title);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> querycachetwo_titletwo   <KEYWORD>ON</KEYWORD> querycachetwo (qcc_type,qcc_namespacetwo,qcc_titletwo);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> objectcache (
  keyname  <TYPE>CHAR</TYPE>(<NUMERIC>255</NUMERIC>)              <KEYWORD>UNIQUE</KEYWORD>,
  value    <TYPE>BLOB</TYPE>,
  exptime  <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> objectcacache_exptime <KEYWORD>ON</KEYWORD> objectcache (exptime);

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> transcache (
  tc_url       <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>  <KEYWORD>UNIQUE</KEYWORD>,
  tc_contents  <TYPE>CLOB</TYPE>         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  tc_time      <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);


<KEYWORD>CREATE</KEYWORD> SEQUENCE log_log_id_seq;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> logging (
  log_type        <TYPE>VARCHAR</TYPE>(<NUMERIC>10</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  log_action      <TYPE>VARCHAR</TYPE>(<NUMERIC>10</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  log_timestamp   <TYPE>TIMESTAMP</TYPE> <KEYWORD>WITH</KEYWORD> <TYPE>TIME</TYPE> <TYPE>ZONE</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  log_user        <TYPE>INTEGER</TYPE>                <KEYWORD>REFERENCES</KEYWORD> mwuser(user_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>SET</KEYWORD> <VALUE>NULL</VALUE>,
  log_namespace   <TYPE>SMALLINT</TYPE>     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  log_title       <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)         <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  log_comment     <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>),
  log_params      <TYPE>CLOB</TYPE>,
  log_deleted     <TYPE>INTEGER</TYPE>      <KEYWORD>DEFAULT</KEYWORD> <STRING>'0'</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  log_id          <TYPE>INTEGER</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> logging_type_name <KEYWORD>ON</KEYWORD> logging (log_type, log_timestamp);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> logging_user_time <KEYWORD>ON</KEYWORD> logging (log_timestamp, log_user);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> logging_page_time <KEYWORD>ON</KEYWORD> logging (log_namespace, log_title, log_timestamp);

<KEYWORD>CREATE</KEYWORD> SEQUENCE trackbacks_tb_id_seq;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> trackbacks (
  tb_id     <TYPE>INTEGER</TYPE>   <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  tb_page   <TYPE>INTEGER</TYPE>            <KEYWORD>REFERENCES</KEYWORD> page(page_id) <KEYWORD>ON</KEYWORD> <KEYWORD>DELETE</KEYWORD> <KEYWORD>CASCADE</KEYWORD>,
  tb_title  <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  tb_url    <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)     <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  tb_ex     <TYPE>CLOB</TYPE>,
  tb_name   <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> trackback_page <KEYWORD>ON</KEYWORD> trackbacks (tb_page);

<KEYWORD>CREATE</KEYWORD> SEQUENCE job_job_id_seq;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> job (
  job_id         <TYPE>INTEGER</TYPE>   <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE> <KEYWORD>PRIMARY</KEYWORD> <KEYWORD>KEY</KEYWORD>,
  job_cmd        <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  job_namespace  <TYPE>SMALLINT</TYPE>  <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  job_title      <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>)      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  job_params     <TYPE>CLOB</TYPE>      <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> job_cmd_namespace_title <KEYWORD>ON</KEYWORD> job (job_cmd, job_namespace, job_title);

<COMMENT>-- This table is not used unless profiling is turned on</COMMENT>
<COMMENT>--CREATE TABLE profiling (</COMMENT>
<COMMENT>--  pf_count   INTEGER         DEFAULT 0 NOT NULL,</COMMENT>
<COMMENT>--  pf_time    NUMERIC(18,10)  DEFAULT 0 NOT NULL,</COMMENT>
<COMMENT>--  pf_name    CLOB            NOT NULL,</COMMENT>
<COMMENT>--  pf_server  CLOB            NULL</COMMENT>
<COMMENT>--);</COMMENT>
<COMMENT>--CREATE UNIQUE INDEX pf_name_server ON profiling (pf_name, pf_server);</COMMENT>

<KEYWORD>CREATE</KEYWORD> <KEYWORD>TABLE</KEYWORD> searchindex (
  si_page       <TYPE>INTEGER</TYPE> <KEYWORD>UNIQUE</KEYWORD> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  si_title      <TYPE>VARCHAR</TYPE>(<NUMERIC>255</NUMERIC>) <KEYWORD>DEFAULT</KEYWORD> <STRING>''</STRING> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>,
  si_text       <TYPE>CLOB</TYPE> <OPERATOR>NOT</OPERATOR> <VALUE>NULL</VALUE>
);


<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> si_title_idx <KEYWORD>ON</KEYWORD> searchindex(si_title) INDEXTYPE <OPERATOR>IS</OPERATOR> <OBJ>ctxsys</OBJ>.<OO>context</OO>;
<KEYWORD>CREATE</KEYWORD> <KEYWORD>INDEX</KEYWORD> si_text_idx <KEYWORD>ON</KEYWORD> searchindex(si_text) INDEXTYPE <OPERATOR>IS</OPERATOR> <OBJ>ctxsys</OBJ>.<OO>context</OO>;